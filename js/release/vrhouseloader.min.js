/* Copyright 2016年 - 2017年 上海亦我信息技术有限公司. All rights reserved. */
isWebGLSupport=function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}},getBrowser=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],{name:"IE",version:e[1]||""}):"Chrome"===n[1]&&null!==(e=t.match(/\bOPR|Edge\/(\d+)/))?{name:"Opera",version:e[1]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),{name:n[0],version:n[1]})},loadJavaScript=function(e,t){var n=document.createElement("script");n.src=e,t=t||function(){},navigator.userAgent.indexOf("MSIE")>0?n.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||(t(),this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this))}:n.onload=function(){t(),this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this)},document.getElementsByTagName("head")[0].appendChild(n)},loadJavaScripts=function(e,t){var n=0,a=function(){++n===e.length?t&&t():loadJavaScript(e[n],a)};loadJavaScript(e[n],a)},window.onload=function(){if(isWebGLSupport()){var e=["js/threejs/three.min.js","js/release/vrhouse.min.js"];loadJavaScripts(e)}else{document.getElementById("loading_bar").style.visibility="hidden";var t=getBrowser();document.getElementById("loading_tip").innerHTML="您的浏览器不支持VR看房，当前浏览器版本是："+t.name+" "+t.version+"<br/><br/>请使用以下浏览器：<br/>IE11、IE Edge、Firefox48+、Chrome50+、Safari9+、猎豹浏览器、360浏览器、UC浏览器<br/>"}};
